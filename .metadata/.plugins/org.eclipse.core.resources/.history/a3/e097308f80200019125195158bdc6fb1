"use strict";var BUILT_IN_CMAPS=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"];var CMap=function(){function t(e){this.codespaceRanges=[[],[],[],[]];this.numCodespaceRanges=0;this.map=[];this.vertical=false;this.useCMap=null;this.builtInCMap=e}t.prototype={addCodespaceRange:function(e,t,n){this.codespaceRanges[e-1].push(t,n);this.numCodespaceRanges++},mapRange:function(e,t,n){var r=n.length-1;while(e<=t){this.map[e]=n;n=n.substr(0,r)+String.fromCharCode(n.charCodeAt(r)+1);++e}},mapRangeToArray:function(e,t,n){var r=0;while(e<=t){this.map[e]=n[r++];++e}},mapOne:function(e,t){this.map[e]=t},lookup:function(e){return this.map[e]},readCharCode:function(e,t){var n=0;var r=this.codespaceRanges;var i=this.codespaceRanges.length;for(var s=0;s<i;s++){n=(n<<8|e.charCodeAt(t+s))>>>0;var o=r[s];for(var u=0,a=o.length;u<a;){var f=o[u++];var l=o[u++];if(n>=f&&n<=l){return[n,s+1]}}}return[0,1]}};return t}();var IdentityCMap=function(){function t(e,t){CMap.call(this);this.vertical=e;this.addCodespaceRange(t,0,65535);this.mapRange(0,65535,"\0")}Util.inherit(t,CMap,{});return t}();var BinaryCMapReader=function(){function t(e){var t=PDFJS.disableWorker;var n=new XMLHttpRequest;n.open("GET",e,false);if(!t){try{n.responseType="arraybuffer";t=n.responseType!=="arraybuffer"}catch(r){t=true}}if(t&&n.overrideMimeType){n.overrideMimeType("text/plain; charset=x-user-defined")}n.send(null);if(n.status===0&&/^https?:/i.test(e)){error("Unable to get binary cMap at: "+e)}if(t){var i=Array.prototype.map.call(n.responseText,function(e){return e.charCodeAt(0)&255});return new Uint8Array(i)}return new Uint8Array(n.response)}function n(e,t){var n=0;for(var r=0;r<=t;r++){n=n<<8|e[r]}return n>>>0}function r(e,t){return String.fromCharCode.apply(null,e.subarray(0,t+1))}function i(e,t,n){var r=0;for(var i=n;i>=0;i--){r+=e[i]+t[i];e[i]=r&255;r>>=8}}function s(e,t){var n=1;for(var r=t;r>=0&&n>0;r--){n+=e[r];e[r]=n&255;n>>=8}}function a(e){this.buffer=e;this.pos=0;this.end=e.length;this.tmpBuf=new Uint8Array(u)}function f(e,u,f){var l=t(e);var c=new a(l);var h=c.readByte();u.vertical=!!(h&1);var p=null;var d=new Uint8Array(o);var v=new Uint8Array(o);var m=new Uint8Array(o);var g=new Uint8Array(o);var y=new Uint8Array(o);var b;var w;while((w=c.readByte())>=0){var E=w>>5;if(E===7){switch(w&31){case 0:c.readString();break;case 1:p=c.readString();break}continue}var S=!!(w&16);var x=w&15;assert(x+1<=o);var T=1;var N=c.readNumber();switch(E){case 0:c.readHex(d,x);c.readHexNumber(v,x);i(v,d,x);u.addCodespaceRange(x+1,n(d,x),n(v,x));for(var C=1;C<N;C++){s(v,x);c.readHexNumber(d,x);i(d,v,x);c.readHexNumber(v,x);i(v,d,x);u.addCodespaceRange(x+1,n(d,x),n(v,x))}break;case 1:c.readHex(d,x);c.readHexNumber(v,x);i(v,d,x);b=c.readNumber();for(var C=1;C<N;C++){s(v,x);c.readHexNumber(d,x);i(d,v,x);c.readHexNumber(v,x);i(v,d,x);b=c.readNumber()}break;case 2:c.readHex(m,x);b=c.readNumber();u.mapOne(n(m,x),String.fromCharCode(b));for(var C=1;C<N;C++){s(m,x);if(!S){c.readHexNumber(y,x);i(m,y,x)}b=c.readSigned()+(b+1);u.mapOne(n(m,x),String.fromCharCode(b))}break;case 3:c.readHex(d,x);c.readHexNumber(v,x);i(v,d,x);b=c.readNumber();u.mapRange(n(d,x),n(v,x),String.fromCharCode(b));for(var C=1;C<N;C++){s(v,x);if(!S){c.readHexNumber(d,x);i(d,v,x)}else{d.set(v)}c.readHexNumber(v,x);i(v,d,x);b=c.readNumber();u.mapRange(n(d,x),n(v,x),String.fromCharCode(b))}break;case 4:c.readHex(m,T);c.readHex(g,x);u.mapOne(n(m,T),r(g,x));for(var C=1;C<N;C++){s(m,T);if(!S){c.readHexNumber(y,T);i(m,y,T)}s(g,x);c.readHexSigned(y,x);i(g,y,x);u.mapOne(n(m,T),r(g,x))}break;case 5:c.readHex(d,T);c.readHexNumber(v,T);i(v,d,T);c.readHex(g,x);u.mapRange(n(d,T),n(v,T),r(g,x));for(var C=1;C<N;C++){s(v,T);if(!S){c.readHexNumber(d,T);i(d,v,T)}else{d.set(v)}c.readHexNumber(v,T);i(v,d,T);c.readHex(g,x);u.mapRange(n(d,T),n(v,T),r(g,x))}break;default:error("Unknown type: "+E);break}}if(p){f(p)}return u}function l(){}var o=16;var u=19;a.prototype={readByte:function(){if(this.pos>=this.end){return-1}return this.buffer[this.pos++]},readNumber:function(){var e=0;var t;do{var n=this.readByte();if(n<0){error("unexpected EOF in bcmap")}t=!(n&128);e=e<<7|n&127}while(!t);return e},readSigned:function(){var e=this.readNumber();return e&1?~(e>>>1):e>>>1},readHex:function(e,t){e.set(this.buffer.subarray(this.pos,this.pos+t+1));this.pos+=t+1},readHexNumber:function(e,t){var n;var r=this.tmpBuf,i=0;do{var s=this.readByte();if(s<0){error("unexpected EOF in bcmap")}n=!(s&128);r[i++]=s&127}while(!n);var o=t,u=0,a=0;while(o>=0){while(a<8&&r.length>0){u=r[--i]<<a|u;a+=7}e[o]=u&255;o--;u>>=8;a-=8}},readHexSigned:function(e,t){this.readHexNumber(e,t);var n=e[t]&1?255:0;var r=0;for(var i=0;i<=t;i++){r=(r&1)<<8|e[i];e[i]=r>>1^n}},readString:function(){var e=this.readNumber();var t="";for(var n=0;n<e;n++){t+=String.fromCharCode(this.readNumber())}return t}};l.prototype={read:f};return l}();var CMapFactory=function(){function t(e){var t=0;for(var n=0;n<e.length;n++){t=t<<8|e.charCodeAt(n)}return t>>>0}function n(e){if(!isString(e)){error("Malformed CMap: expected string.")}}function r(e){if(!isInt(e)){error("Malformed CMap: expected int.")}}function i(e,r){while(true){var i=r.getObj();if(isEOF(i)){break}if(isCmd(i,"endbfchar")){return}n(i);var s=t(i);i=r.getObj();n(i);var o=i;e.mapOne(s,o)}}function s(e,r){while(true){var i=r.getObj();if(isEOF(i)){break}if(isCmd(i,"endbfrange")){return}n(i);var s=t(i);i=r.getObj();n(i);var o=t(i);i=r.getObj();if(isInt(i)||isString(i)){var u=isInt(i)?String.fromCharCode(i):i;e.mapRange(s,o,u)}else if(isCmd(i,"[")){i=r.getObj();var a=[];while(!isCmd(i,"]")&&!isEOF(i)){a.push(i);i=r.getObj()}e.mapRangeToArray(s,o,a)}else{break}}error("Invalid bf range.")}function o(e,i){while(true){var s=i.getObj();if(isEOF(s)){break}if(isCmd(s,"endcidchar")){return}n(s);var o=t(s);s=i.getObj();r(s);var u=String.fromCharCode(s);e.mapOne(o,u)}}function u(e,i){while(true){var s=i.getObj();if(isEOF(s)){break}if(isCmd(s,"endcidrange")){return}n(s);var o=t(s);s=i.getObj();n(s);var u=t(s);s=i.getObj();r(s);var a=String.fromCharCode(s);e.mapRange(o,u,a)}}function a(e,n){while(true){var r=n.getObj();if(isEOF(r)){break}if(isCmd(r,"endcodespacerange")){return}if(!isString(r)){break}var i=t(r);r=n.getObj();if(!isString(r)){break}var s=t(r);e.addCodespaceRange(r.length,i,s)}error("Invalid codespace range.")}function f(e,t){var n=t.getObj();if(isInt(n)){e.vertical=!!n}}function l(e,t,n,r){var l;var h;e:while(true){var p=t.getObj();if(isEOF(p)){break}else if(isName(p)){if(p.name==="WMode"){f(e,t)}l=p}else if(isCmd(p)){switch(p.cmd){case"endcmap":break e;case"usecmap":if(isName(l)){h=l.name}break;case"begincodespacerange":a(e,t);break;case"beginbfchar":i(e,t);break;case"begincidchar":o(e,t);break;case"beginbfrange":s(e,t);break;case"begincidrange":u(e,t);break}}}if(!r&&h){r=h}if(r){c(e,n,r)}}function c(e,t,n){e.useCMap=p(n,t);if(e.numCodespaceRanges===0){var r=e.useCMap.codespaceRanges;for(var i=0;i<r.length;i++){e.codespaceRanges[i]=r[i].slice()}e.numCodespaceRanges=e.useCMap.numCodespaceRanges}for(var s in e.useCMap.map){if(s in e.map){continue}e.map[s]=e.useCMap.map[s]}}function h(e,t){var n=t.url+e+".bcmap";var r=new CMap(true);(new BinaryCMapReader).read(n,r,function(e){c(r,t,e)});return r}function p(e,t){if(e==="Identity-H"){return new IdentityCMap(false,2)}else if(e==="Identity-V"){return new IdentityCMap(true,2)}if(BUILT_IN_CMAPS.indexOf(e)===-1){error("Unknown cMap name: "+e)}assert(t,"buildin cmap parameters are not provided");if(t.packed){return h(e,t)}var n=new XMLHttpRequest;var r=t.url+e;n.open("GET",r,false);n.send(null);if(n.status===0&&/^https?:/i.test(r)){error("Unable to get cMap at: "+r)}var i=new CMap(true);var s=new Lexer(new StringStream(n.responseText));l(i,s,t,null);return i}return{create:function(e,t,n){if(isName(e)){return p(e.name,t)}else if(isStream(e)){var r=new CMap;var i=new Lexer(e);try{l(r,i,t,n)}catch(s){warn("Invalid CMap data. "+s)}return r}error("Encoding required.")}}}()